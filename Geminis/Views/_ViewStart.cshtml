@{
    string controllerName = Convert.ToString(HttpContext.Current.Request.RequestContext.RouteData.Values["Controller"]);
    string actionName = HttpContext.Current.Request.RequestContext.RouteData.Values["action"].ToString();
    string url = "/" + controllerName + "/" + actionName;

    if (url.ToLower() != "/Home/Index".ToLower() && url.ToLower() != "/Home/PageNotFound".ToLower())
    {
        //var modulo = Geminis.Clases.Home.Instance.ObtenerModuloPorURL(url);

        var item = new BE.Login_BE();
        item.MTIPO = 4;
        item.URL = url;
        var modulo = Geminis.Clases.BackTools.Login_store_procedure(item).FirstOrDefault();

        long? codigoModulo = null;
        if (modulo != null)
        {
            codigoModulo = modulo.ID_MODULO;
        }
        Session["CodigoModulo"] = codigoModulo;
        Layout = "~/Views/Shared/_Layout.cshtml";
    }
}